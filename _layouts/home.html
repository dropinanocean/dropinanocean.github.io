<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
  {%- include head.html -%}
  <body style="background:#0f1a2b; color:#e0e0e0; font-family: Arial, sans-serif; margin:0; padding:0; overflow-x:hidden; position:relative;">

    <!-- Background bubbles -->
    <div class="bubbles-container"></div>

    <!-- Header -->
    <header class="site-header">
      <div class="header-container">
        <div class="logo">
          <a href="{{ '/' | relative_url }}">Drop In An Ocean</a>
        </div>
      </div>
    </header>

    <!-- Posts Grid -->
    <div class="posts-grid">
      {% for post in site.posts %}
        <a class="post-card" href="{{ post.url | relative_url }}" data-post-date="{{ post.date | date: "%Y-%m-%dT%H:%M:%S%z" }}">
          <div class="post-title">{{ post.title }}</div>
          <div class="post-date"></div>
        </a>
      {% endfor %}
    </div>

    <style>
      body, html {
        margin:0; padding:0;
        background:#0f1a2b;
        color:#e0e0e0;
        font-family: Arial, sans-serif;
        min-height:100vh;
        overflow-x:hidden;
        position:relative;
      }

      /* Bubbles container */
      .bubbles-container {
        position: fixed;
        top:0; left:0;
        width:100%;
        height:100vh;
        pointer-events:none;
        z-index:0;
        overflow:hidden;
      }
      .bubble {
        position:absolute;
        bottom:-50px;
        border-radius:50%;
        opacity:0.3;
        background: #66c2ff;
        animation: rise linear infinite;
      }
      @keyframes rise {
        0% { transform: translateY(0) scale(1); opacity:0.3; }
        50% { opacity:0.5; }
        100% { transform: translateY(-120vh) scale(1.2); opacity:0; }
      }

      /* Header */
      .site-header {
        width:90%;
        max-width:1000px;
        margin:20px auto;
        padding:25px;
        border-radius:12px;
        text-align:center;
        box-shadow:0 2px 8px rgba(0,0,0,0.6);
        position:relative;
        overflow:hidden;
        z-index:1;
        background: rgba(30, 58, 95, 0.9);
      }
      .site-header .logo a {
        color:#66c2ff;
        font-size:2em;
        font-weight:bold;
        text-decoration:none;
        transition: color 0.3s ease;
      }
      .site-header .logo a:hover {
        color:#a0d4ff;
      }

      /* Posts grid */
      .posts-grid {
        display:flex;
        flex-wrap: wrap;
        justify-content:center;
        gap:20px;
        max-width:1000px;
        margin:40px auto 60px auto;
        padding:0 10px;
        position:relative;
        z-index:1;
      }

      /* Post cards */
      .post-card {
        display:flex;
        flex-direction:column;
        justify-content:space-between;
        width:280px;
        min-height:100px;
        background:#1e3a5f;
        padding:20px;
        border-radius:12px;
        text-decoration:none;
        color:#e0e0e0;
        box-shadow:0 6px 15px rgba(0,0,0,0.5);
        transition: transform 0.4s ease, box-shadow 0.4s ease, background 0.4s ease;
        opacity:0;
        transform: translateY(30px);
      }
      .post-card:hover {
        transform: translateY(-5px) scale(1.05) rotateX(2deg) rotateY(2deg);
        box-shadow:0 12px 25px rgba(0,0,0,0.7);
        background:#336699;
      }

      .post-card .post-title {
        font-size:1.2em;
        font-weight:bold;
        margin-bottom:10px;
        color:#66c2ff;
        transition: color 0.3s ease, transform 0.3s ease, text-shadow 0.3s ease;
      }
      .post-card:hover .post-title {
        color:#a0d4ff;
        transform: scale(1.05);
        text-shadow: 0 0 8px rgba(160,212,255,0.8);
      }

      .post-card .post-date {
        font-size:0.9em;
        color:#c0e8ff;
        background: rgba(102, 194, 255,0.1);
        padding:3px 8px;
        border-radius:6px;
        width: fit-content;
      }

      .fade-in { opacity:1 !important; transform:translateY(0) !important; }

      @media(max-width:768px){
        .posts-grid { flex-direction: column; align-items:center; }
        .post-card { width:90%; max-width:350px; }
      }
    </style>

    <script>
      // Fade-in posts
      const posts = document.querySelectorAll('.post-card');
      const fadeInPosts = () => {
        const triggerBottom = window.innerHeight * 0.85;
        posts.forEach(post => {
          const postTop = post.getBoundingClientRect().top;
          if(postTop < triggerBottom) post.classList.add('fade-in');
        });
      };
      window.addEventListener('scroll', fadeInPosts);
      window.addEventListener('load', fadeInPosts);

      // Post date relative
      function timeSince(date) {
        const seconds = Math.floor((new Date() - new Date(date))/1000);
        let interval = Math.floor(seconds/31536000);
        if(interval>=1) return interval+" year"+(interval>1?"s":"")+" ago";
        interval=Math.floor(seconds/2592000);
        if(interval>=1) return interval+" month"+(interval>1?"s":"")+" ago";
        interval=Math.floor(seconds/86400);
        if(interval>=1) return interval+" day"+(interval>1?"s":"")+" ago";
        interval=Math.floor(seconds/3600);
        if(interval>=1) return interval+" hour"+(interval>1?"s":"")+" ago";
        interval=Math.floor(seconds/60);
        if(interval>=1) return interval+" minute"+(interval>1?"s":"")+" ago";
        return "just now";
      }
      document.querySelectorAll('.post-card').forEach(card => {
        const dateStr = card.getAttribute('data-post-date');
        const dateElem = card.querySelector('.post-date');
        if(dateStr && dateElem) dateElem.textContent = timeSince(dateStr);
      });

      // Floating bubbles
      const bubbleContainer = document.querySelector('.bubbles-container');
      const numBubbles = 25;
      const bubbles = [];
      for(let i=0;i<numBubbles;i++){
        const bubble = document.createElement('div');
        bubble.classList.add('bubble');
        const size=Math.random()*20+10;
        bubble.style.width=`${size}px`;
        bubble.style.height=`${size}px`;
        bubble.style.left=`${Math.random()*100}%`;
        bubble.style.animationDuration=`${5 + Math.random()*10}s`;
        bubble.style.animationDelay=`${Math.random()*5}s`;
        bubbleContainer.appendChild(bubble);
        bubbles.push(bubble);
      }

      // Move bubbles away from cursor
      window.addEventListener('mousemove', e=>{
        bubbles.forEach(bubble=>{
          const rect = bubble.getBoundingClientRect();
          const dx = e.clientX - (rect.left + rect.width/2);
          const dy = e.clientY - (rect.top + rect.height/2);
          const dist = Math.sqrt(dx*dx+dy*dy);
          if(dist<100){
            bubble.style.transform=`translate(${dx/4}px, ${dy/4}px)`;
            setTimeout(()=>{bubble.style.transform='';},200);
          }
        });
      });
    </script>
  </body>
</html>
